"use strict";(self.webpackChunkphotogallert_react=self.webpackChunkphotogallert_react||[]).push([[893],{5893:function(e,r,n){n.r(r),n.d(r,{default:function(){return k}});var t,i,l,s,d=n(2791),a=n(9023),c=n(7200),h=n(168),u=n(6444),o=n(184),g=u.ZP.div(t||(t=(0,h.Z)(["\n   background:orange;\n   padding:10px;\n   margin:30px 0;\n   color:#fff;\n   border-radius:4px;\n"]))),x=(0,a.Pi)((function(e){var r=e.children,n=(0,c.m)().UserStore;return(0,o.jsx)(o.Fragment,{children:n.currentUser?null:(0,o.jsx)(g,{children:r})})})),p=n(1413),f=n(32),j=n(3775),m=n(7083),b=n(6776),v=n(9553).Z.Dragger,Z=u.ZP.div(i||(i=(0,h.Z)(["\n  margin-top:30px;\n  border:1px dashed #ccc;\n  padding:20px;\n"]))),w=u.ZP.h1(l||(l=(0,h.Z)(["\n  margin:20px 0;\n  text-align:center;\n"]))),S=u.ZP.img(s||(s=(0,h.Z)(["\n  max-width:300px;\n"]))),F=(0,a.Pi)((function(){var e=(0,c.m)(),r=e.ImageStore,n=e.UserStore,t=(0,d.useRef)(),i=(0,d.useRef)(),l=(0,f.hN)((function(){return{width:null,setWidth:function(e){l.width=e},get widthStr(){return l.width?"/w/".concat(l.width):""},height:null,setHeight:function(e){l.height=e},get heightStr(){return l.height?"/h/".concat(l.height):""},get fullStr(){return r.serverFile.attributes.url.attributes.url+"?imageView2/0"+l.widthStr+l.heightStr}}})),s={showUploadList:!1,beforeUpload:function(e){return r.setFile(e),r.setFilename(e.name),null===n.currentUser?(j.ZP.warning("\u8bf7\u5148\u767b\u5f55\u518d\u4e0a\u4f20"),!1):(r.upload().then((function(e){console.log("\u4e0a\u4f20\u6210\u529f"),console.log(e)})).catch((function(){console.log("\u4e0a\u4f20\u5931\u8d25")})),!1)}};return(0,o.jsxs)("div",{children:[(0,o.jsx)(m.Z,{tip:"\u4e0a\u4f20\u4e2d",spinning:r.isUpoading,children:(0,o.jsxs)(v,(0,p.Z)((0,p.Z)({},s),{},{children:[(0,o.jsx)("p",{className:"ant-upload-drag-icon",children:(0,o.jsx)(b.Z,{})}),(0,o.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,o.jsx)("p",{className:"ant-upload-hint",children:"\u4ec5\u652f\u6301.png/.gif/.jpg/.svg\u683c\u5f0f\u7684\u56fe\u7247\uff0c\u56fe\u7247\u6700\u59271M"})]}))}),r.serverFile?(0,o.jsxs)(Z,{children:[(0,o.jsx)(w,{children:"\u4e0a\u4f20\u7ed3\u679c"}),(0,o.jsxs)("dl",{children:[(0,o.jsx)("dt",{children:"\u7ebf\u4e0a\u5730\u5740"}),(0,o.jsx)("dd",{children:(0,o.jsx)("a",{target:"_blank",href:r.serverFile.attributes.url.attributes.url,children:r.serverFile.attributes.url.attributes.url})}),(0,o.jsx)("dt",{children:"\u6587\u4ef6\u540d"}),(0,o.jsx)("dd",{children:r.filename}),(0,o.jsx)("dt",{children:"\u56fe\u7247\u9884\u89c8"}),(0,o.jsx)("dd",{children:(0,o.jsx)(S,{src:r.serverFile.attributes.url.attributes.url})}),(0,o.jsx)("dt",{children:"\u66f4\u591a\u5c3a\u5bf8"}),(0,o.jsxs)("dd",{children:[(0,o.jsx)("input",{ref:t,onChange:function(){console.log("bindWidthChange..."),console.log(t.current.value),l.setWidth(t.current.value)},placeholder:"\u6700\u5927\u5bbd\u5ea6(\u53ef\u9009)"}),(0,o.jsx)("input",{ref:i,onChange:function(){l.setHeight(i.current.value)},placeholder:"\u6700\u5927\u9ad8\u5ea6(\u53ef\u9009)"})]}),(0,o.jsx)("dd",{children:(0,o.jsx)("a",{target:"_blank",href:l.fullStr,children:l.fullStr})})]})]}):null]})})),k=(0,a.Pi)((function(){(0,c.m)().UserStore;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x,{children:"\u8bf7\u5148\u767b\u5f55\u518d\u4e0a\u4f20!!!"}),(0,o.jsx)(F,{})]})}))}}]);
//# sourceMappingURL=893.d78eb1aa.chunk.js.map